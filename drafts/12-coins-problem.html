<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
    <title>More Internet Clutter | 12 coins problem</title>
    <link rel="shortcut icon" type="image/png" href="http://chanhosuh.github.io/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="http://chanhosuh.github.io/favicon.ico">
    <link href="http://chanhosuh.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="More Internet Clutter Full Atom Feed" />
    <link href="http://chanhosuh.github.io/feeds/brainteasers-interview-questions-information-theory.atom.xml" type="application/atom+xml" rel="alternate" title="More Internet Clutter Categories Atom Feed" />
    <link rel="stylesheet" href="http://chanhosuh.github.io/theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="http://chanhosuh.github.io/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://chanhosuh.github.io/theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />

</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/pages/about-me.html">About Me</a></li>
                <li><a href="/pages/resume.html">Resume</a></li>
                <li><a href="http://chanhosuh.github.io/archives">Blog</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="http://chanhosuh.github.io">More Internet Clutter</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Feb 08, 2016</h4>

            <article class="post">
                <h2 class="title">
                    <a href="http://chanhosuh.github.io/drafts/12-coins-problem.html" rel="bookmark" title="Permanent Link to &quot;12 coins problem&quot;">12 coins problem</a>
                </h2>

                <p>You are given 12 coins that look identical and a pair of scales.
One of the coins is fake and has a different weight than the
others.  Your challenge is to use the scales at most three times
to determine the fake coin and whether it is light or heavier
than a real coin.  You can weigh any group of coins against another
using the scales to see which is heavier or if they balance, but
you cannot measure the actual weights of the coins.</p>
<p>I'd run across this problem in interview brainteaser collections
but always found it mysterious: why 12 coins?  And how does this
work out so beautifully?</p>
<p>It turns out there is a nice way to think about it from the 
viewpoint of information theory.  In information theory, information
is measured in <em>bits</em>, and your ability to learn is limited by the
amount of information available.  </p>
<p>In our problem, the system we are learning about consists of 12 coins,
with one being fake.  Since the fake coin can be one of 12 coins and
the fake coin can have two states, light or heavy, there are 24
possible states of the system.</p>
<p>Each weighing gives one of three results (left side is heavier, 
right side is heavier, both sides balance), a <em>trinary</em> "bit" of 
information (called a <strong>trit</strong>).  Since there are three weighings, 
our entire weighing process gives us three trits of information.
In other words, we have 3^3 (=27) possible outcomes from our weighing
process.</p>
<p>Now we can see why <em>three</em> weighings are used in the problem.  Two 
would have been impossible.  That would result in only 3^2 (=9) 
outcomes, and we have 24 possible states.  There is no way we can 
"invert" our process and deduce which state we started with.  With 
three weighings, we have a chance, and four, we might guess makes 
the problem too easy.  </p>
<p>At this point, it helps to think more formally about the problem.
Our weighing process with the three weighings are effectively an
encoding scheme that codes the starting state of the system into
a three letter codeword in the alphabet {O, L, R}.  "O" means 
the two sides balance, "L" means the left side is heavier, and "R"
means the right side is heavier.  Examples of codewords are then 
ORL, LLR, ROO.  </p>
<p>As we noted before, there are 27 possible codewords.  In order to
find a solution the problem, we must be able to invert the encoding
("decode uniquely") to obtain the starting state.</p>
<p>For example, we might get OLL.  This means the first weighing
balanced the sides. In particular, the fake coin is off the scale.
The second weighing pushed down the left side.  This means that
(assuming the fake is heavier) the fake coin was on the left side
of the scale.  The last weighing did the same, so the fake coin
was again on the left side.  If the fake is lighter, then the
conclusion is it was on the right sides for the last two weighings.</p>
<p>Whether the fake is heavier or lighter, it's clear the three
weighings give a codeword which then corresponds exactly to the 
coin which was placed according to the codeword (or its reflection).</p>
<p>Thus if we have the entire set of resulting 
codewords for a working solution, that tells us the solution itself!
Each codeword tells us where to place a corresponding coin on each
weighing.  That corresponding coin is the one that is revealed as 
fake if the codeword were to result. </p>
<p>After thinking very carefully, it is clear we need to have the
following:</p>
<div class="highlight"><pre><span></span>1. Every coin is placed on the scale for at least one
   weighing.
2. No two coins are placed at the same location for every
   weighing.
3. No two coins are placed on opposite sides and taken off
   the scale together for every weighing.
4. Each weighing places the same number of coins on each
   side of the scale.
</pre></div>


<p>The last is necessary if our procedure is to always find the fake coin
since the fake coin can be any weight, as long as it is not equal to
a real coin.  </p>
<p>The above conditions means the set of resulting codewords satisfy 
the following:</p>
<div class="highlight"><pre><span></span>1. It does not contain OOO
2. It does not contain a pair of words that are reflections
   of each other, e.g. LRR is the reflection of RLL, OLO is
   the reflection of ORO, etc.
3. For each position 1-3, there are equal numbers of L&#39;s and
   R&#39;s.
</pre></div>


<p>Once we find such a set of codewords, each codeword gives the
location of the coin for each weighing:</p>
<div class="highlight"><pre><span></span>- O means &quot;off the scale&quot;
- L means &quot;on the left side of the scale&quot;
- R means &quot;on the right side of the scale&quot;
</pre></div>


<p>In particular, in order for there to be
enough codewords to cover the 24 system states (and keeping in mind
that we place the same number on each side of the scale) we must place
four coins on each side of the scale at each weighing.  Any less and
there wouldn't be enough codewords.  And there are not enough codewords
to allow 5 or more to be weighed on each side (given the first letter,
there are only 9 words starting with R, and 9 starting with L, half of
them are reflections and not allowed, so we really only have 9 allowable
words to determine which coins get placed on a scale, but only an even
number of coins can be placed on the scale (half on each side), so the
most we can have is 4 on each side at a time.</p>
<p>So from an information theoretic viewpoint, we see very clearly why we
must divide up the 12 coins into three groups of four, something which
may strike us as very mysterious when using trial-and-error to derive
the solution!</p>
<p>Another nice thing about viewing the problem this way, is it lets us
generalize to more coins and more weighings.  If we allow four weighings,
what's the largest number of coins for which we can determine the fake
coin?  With three weighings, we saw that 12 is the optimal number.
Anymore, and we simplywould not have enough codewords.</p>
<p>For four weighings, we have 3^4 = 81 possible codewords.  As before
OOOO is not allowed, so that leaves us with 80 possibilities.  Again,
there are 40 reflection pairs, so we can have at most 40 coins.  Note
that 27 codewords (modulo reflections) are allowed for coins being
placed on the scale, and 13 for off the scale.  Again the restriction
that we allow only equal numbers to be placed on each side of the scale
means that 13 is the largest that can be placed on each side.  So we
have 26 coins being placed on a scale at once and that leaves 13 for
off the scale, for a total of 39 coins.</p>
<p>Going through this reasoning more rigorously and keeping track of the
arithmetic, we conclude that the number of coins can be at most
(3^n - 3) / 2 where n is the number of weighings.</p>
<div class="highlight"><pre><span></span>- n = 3,  # coins = 12
- n = 4,  # coins = 39
- n = 5,  # coins = 120
- etc..
</pre></div>
                <div class="clear"></div>

                <div class="info">
                    <a href="http://chanhosuh.github.io/drafts/12-coins-problem.html">posted at 00:00</a>
                    &nbsp;&middot;&nbsp;<a href="http://chanhosuh.github.io/category/brainteasers-interview-questions-information-theory.html" rel="tag">brainteasers, interview questions, information theory</a>
                </div>
            </article>
            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="http://chanhosuh.github.io/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>