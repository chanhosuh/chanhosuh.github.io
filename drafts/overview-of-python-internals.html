<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
    <title>More Internet Clutter | Overview of Python internals</title>
    <link rel="shortcut icon" type="image/png" href="http://chanhosuh.github.io/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="http://chanhosuh.github.io/favicon.ico">
    <link href="http://chanhosuh.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="More Internet Clutter Full Atom Feed" />
    <link href="http://chanhosuh.github.io/feeds/python-cpython.atom.xml" type="application/atom+xml" rel="alternate" title="More Internet Clutter Categories Atom Feed" />
    <link rel="stylesheet" href="http://chanhosuh.github.io/theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="http://chanhosuh.github.io/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://chanhosuh.github.io/theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />

</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="http://chanhosuh.github.io">Home</a></li>
                <li><a href="http://chanhosuh.github.io/pages/about-me.html">About Me</a></li>
                <li><a href="http://chanhosuh.github.io/archives">Archives</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="http://chanhosuh.github.io">More Internet Clutter</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Jun 03, 2017</h4>

            <article class="post">
                <h2 class="title">
                    <a href="http://chanhosuh.github.io/drafts/overview-of-python-internals.html" rel="bookmark" title="Permanent Link to &quot;Overview of Python internals&quot;">Overview of Python internals</a>
                </h2>

                <p>Objects:</p>
<p>Everything in Python is an object, including integers, functions, and classes.  In the reference implementation in C,this is represented as a C struct type, the PyObject, which is allocated on the heap.</p>
<p>PyObject head
    Py_ssize_t ob_refcnt;
    struct _typeobject *ob_type;</p>
<p>PyVarObject head
    Py_ssize_t ob_refcnt;
    struct _typeobject *ob_type;
    Py_ssize_t ob_size;  // length of variable size object</p>
<p>PyTypeObject</p>
<p>Things to explain (mysteries?):</p>
<p>abstract object interface
- method calls
  -- method objects
  -- instance dict versus class dict
- builtin versus user-defined class
  -- magic methods, e.g. len, str</p>
<p>import</p>
<p>namespaces</p>
<p>frame objects:
- locals
    - fast locals
    - cell vars, free vars
- contains value stack
- block stack</p>
<p>functions:</p>
<p>CALL_FUNCTION  -- starts by building a frame</p>
<p>Closures
- cell vars
- code object can be referenced multiple times by different function objects</p>
<p>Generators
- generator function is defined as function with "yield" keyword
- executing generator function creates generator object, which has a reference to a frame object
- calling "next" on generator object executes bytecode in its frame object until "YIELD_VALUE" is reached or bytecode runs out (returns None)
- there are also generator expressions</p>
<p>Classes
how does a class get built?  before "BUILD_CLASS" op is read, the attribute dict must be built by "CALL_FUNCTION"??</p>
<p>Descriptors
- bound vs unbound methods
    - PyMethod object
- attribute lookup chain
    - TP_DESCR_GET
- properties    </p>
                <div class="clear"></div>

                <div class="info">
                    <a href="http://chanhosuh.github.io/drafts/overview-of-python-internals.html">posted at 00:00</a>
                    &nbsp;&middot;&nbsp;<a href="http://chanhosuh.github.io/category/python-cpython.html" rel="tag">Python, CPython</a>
                </div>
            </article>
            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="http://chanhosuh.github.io/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>